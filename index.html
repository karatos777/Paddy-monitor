<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ðŸŒ¾ Ultimate Paddy Field Dashboard</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
body {
    font-family: 'Arial', sans-serif;
    margin: 0;
    padding: 0;
    background: linear-gradient(120deg,#74ebd5,#ACB6E5);
    color: #333;
    display: flex;
    flex-direction: column;
    align-items: center;
}
h1 {
    margin: 20px 0;
    color: #fff;
    text-shadow: 2px 2px 6px #000;
    font-size: 2em;
}
.cards {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    gap: 15px;
    width: 90%;
    margin-bottom: 20px;
}
.card {
    background: rgba(255,255,255,0.85);
    border-radius: 15px;
    padding: 20px;
    text-align: center;
    box-shadow: 0 8px 20px rgba(0,0,0,0.4);
    transition: transform 0.3s ease;
    position: relative;
    overflow: hidden;
}
.card:hover {
    transform: scale(1.05);
}
.card h3 {
    margin: 5px 0;
}
.status {
    font-weight: bold;
    padding: 5px 10px;
    border-radius: 8px;
    color: #fff;
    font-size: 1.2em;
    animation-duration: 1.5s;
    animation-iteration-count: infinite;
}
.motion {
    font-weight: bold;
    color: #fff;
    padding: 5px 10px;
    border-radius: 8px;
    animation-duration: 1s;
    animation-iteration-count: infinite;
}
@keyframes safePulse {
    0% { box-shadow: 0 0 5px #28a745; transform: scale(1); }
    50% { box-shadow: 0 0 25px #28a745; transform: scale(1.05);}
    100% { box-shadow: 0 0 5px #28a745; transform: scale(1);}
}
@keyframes warningFlash {
    0% { background-color: orange; }
    50% { background-color: #ffb84d; }
    100% { background-color: orange; }
}
@keyframes criticalFlash {
    0% { background-color: red; transform: rotate(0deg); }
    25% { background-color: #ff4d4d; transform: rotate(-2deg); }
    50% { background-color: red; transform: rotate(2deg); }
    75% { background-color: #ff4d4d; transform: rotate(-2deg); }
    100% { background-color: red; transform: rotate(0deg); }
}
@keyframes motionPulse {
    0% { box-shadow: 0 0 5px #f44336; }
    50% { box-shadow: 0 0 25px #f44336; }
    100% { box-shadow: 0 0 5px #f44336; }
}
canvas {
    background: rgba(255,255,255,0.9);
    border-radius: 15px;
    padding: 15px;
    margin-bottom: 30px;
}
.table-history {
    width: 90%;
    border-collapse: collapse;
    margin-bottom: 30px;
}
.table-history th, .table-history td {
    border: 1px solid #333;
    padding: 8px;
    text-align: center;
    background: rgba(255,255,255,0.85);
}
.table-history th {
    background: rgba(0,0,0,0.2);
    color: #fff;
}
</style>
</head>
<body>
<h1>ðŸŒ¾ Ultimate Paddy Field Monitoring</h1>

<div class="cards">
  <div class="card">
    <h3>Status</h3>
    <div id="status" class="status">--</div>
  </div>
  <div class="card">
    <h3>Motion</h3>
    <div id="motion" class="motion">--</div>
  </div>
  <div class="card">
    <h3>Temperature</h3>
    <div id="temp">-- Â°C</div>
  </div>
  <div class="card">
    <h3>Moisture</h3>
    <div id="moist">-- %</div>
  </div>
  <div class="card">
    <h3>CO2</h3>
    <div id="gas">-- ppm</div>
  </div>
</div>

<canvas id="chart" width="400" height="200"></canvas>

<h2>Recent History</h2>
<table class="table-history">
<thead>
<tr>
<th>Time</th><th>Temp(Â°C)</th><th>Moist(%)</th><th>CO2(ppm)</th><th>Status</th><th>Motion</th>
</tr>
</thead>
<tbody id="history">
</tbody>
</table>

<script>
let labels=[], tempData=[], moistData=[], gasData=[], historyData=[];
const ctx = document.getElementById('chart').getContext('2d');
const chart = new Chart(ctx,{
  type:'line',
  data:{
    labels:labels,
    datasets:[
      {label:'Temperature', data: tempData, borderColor:'red', tension:0.3, fill:false},
      {label:'Moisture', data: moistData, borderColor:'blue', tension:0.3, fill:false},
      {label:'CO2', data: gasData, borderColor:'green', tension:0.3, fill:false}
    ]
  },
  options:{
    responsive:true,
    plugins:{legend:{display:true}},
    scales:{y:{beginAtZero:true}}
  }
});

// MOCK DATA: replace with Firebase fetch in production
function generateMockData(){
  const temp = Math.floor(Math.random()*15 + 25);
  const moist = Math.floor(Math.random()*50 + 10);
  const gas = Math.floor(Math.random()*1500 + 400);
  const motion = Math.random() > 0.7 ? 1 : 0;
  const status = gas>1500 ? "CRITICAL" : (temp>40 || moist>14 ? "WARNING":"SAFE");
  return {temp,moist,gas,motion,status};
}

function updateDashboard(data){
  document.getElementById("temp").innerText = data.temp + " Â°C";
  document.getElementById("moist").innerText = data.moist + " %";
  document.getElementById("gas").innerText = data.gas + " ppm";

  // Status
  const statusEl = document.getElementById("status");
  statusEl.innerText = data.status;
  statusEl.style.animationName = data.status=="SAFE"?"safePulse":data.status=="WARNING"?"warningFlash":"criticalFlash";

  // Motion
  const motionEl = document.getElementById("motion");
  motionEl.innerText = data.motion==1?"Detected":"No Motion";
  motionEl.style.animationName = data.motion==1?"motionPulse":"none";
  motionEl.style.backgroundColor = data.motion==1?"#f44336":"#4caf50";

  // Chart
  labels.push(new Date().toLocaleTimeString());
  tempData.push(data.temp);
  moistData.push(data.moist);
  gasData.push(data.gas);
  if(labels.length>20){
    labels.shift(); tempData.shift(); moistData.shift(); gasData.shift();
  }
  chart.update();

  // History table
  historyData.push({...data,time:new Date().toLocaleTimeString()});
  if(historyData.length>10) historyData.shift();
  const tbody = document.getElementById("history");
  tbody.innerHTML="";
  historyData.forEach(d=>{
    tbody.innerHTML += `<tr><td>${d.time}</td><td>${d.temp}</td><td>${d.moist}</td><td>${d.gas}</td><td>${d.status}</td><td>${d.motion==1?"Detected":"No Motion"}</td></tr>`;
  });
}

// ðŸ”¹ Replace this with Firebase read in production
setInterval(()=>updateDashboard(generateMockData()),3000);
</script>
</body>
</html>